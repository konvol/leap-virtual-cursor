{"ast":null,"code":"var WebSocket = require('ws'),\n    BaseConnection = require('./base');\n\nvar NodeConnection = module.exports = function (opts) {\n  BaseConnection.call(this, opts);\n  var connection = this;\n  this.on('ready', function () {\n    connection.reportFocus(true);\n  });\n};\n\nObject.assign(NodeConnection.prototype, BaseConnection.prototype);\nNodeConnection.__proto__ = BaseConnection;\n\nNodeConnection.prototype.setupSocket = function () {\n  var connection = this;\n  var socket = new WebSocket(this.getUrl());\n  socket.on('open', function () {\n    connection.handleOpen();\n  });\n  socket.on('message', function (m) {\n    connection.handleData(m);\n  });\n  socket.on('close', function (code, reason) {\n    connection.handleClose(code, reason);\n  });\n  socket.on('error', function () {\n    connection.startReconnection();\n  });\n  return socket;\n};","map":null,"metadata":{},"sourceType":"script"}